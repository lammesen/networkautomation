{% extends "base.html" %}
{% block title %}Run Command - webnet{% endblock %}

{% block content %}
<!-- Page Header -->
<div class="flex flex-col gap-4 md:flex-row md:items-center md:justify-between mb-6">
  <div>
    <h1 class="text-2xl font-bold tracking-tight">Run Command</h1>
    <p class="text-muted-foreground">Execute commands across multiple network devices</p>
  </div>
</div>

<div class="max-w-xl">
  <!-- Form Card -->
  <div class="rounded-lg border bg-card p-6">
    <form hx-post="" hx-target="#command-result" class="space-y-4">
      {% csrf_token %}
      
      <div class="space-y-2">
        <label for="command" class="text-sm font-medium leading-none">
          Command <span class="text-destructive">*</span>
        </label>
        <input type="text" name="command" id="command" required 
               class="flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm transition-colors placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring" 
               placeholder="e.g., show version" />
        <p class="text-xs text-muted-foreground">Enter the CLI command to execute</p>
      </div>

      <div class="space-y-2">
        <label for="targets" class="text-sm font-medium leading-none">Target Devices</label>
        <input type="text" name="targets" id="targets"
               class="flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm transition-colors placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring" 
               placeholder="e.g., site=lab,vendor=cisco" />
        <p class="text-xs text-muted-foreground">Filter devices by key=value pairs, comma-separated. Leave empty for all devices.</p>
      </div>

      <div class="border-t pt-4">
        <button type="submit" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring h-9 px-4 py-2 w-full bg-primary text-primary-foreground shadow hover:bg-primary/90">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
          </svg>
          Run Command
        </button>
      </div>
    </form>

    <div id="command-result" class="mt-4"></div>
  </div>

  <!-- Help Card -->
  <div class="rounded-lg border bg-card p-6 mt-6">
    <div class="flex items-center gap-2 mb-3">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
      <h3 class="font-semibold text-sm">Target Filter Examples</h3>
    </div>
    <div class="text-sm text-muted-foreground space-y-2">
      <p><code class="rounded bg-muted px-2 py-1 text-xs font-mono">site=datacenter-1</code> - All devices in datacenter-1</p>
      <p><code class="rounded bg-muted px-2 py-1 text-xs font-mono">vendor=cisco,platform=ios</code> - Cisco IOS devices</p>
      <p><code class="rounded bg-muted px-2 py-1 text-xs font-mono">role=core</code> - All core routers</p>
    </div>
  </div>
</div>
{% endblock %}
