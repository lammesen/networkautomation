<div class="relative w-full overflow-auto p-4">
  <table class="w-full caption-bottom text-sm">
    <thead class="[&_tr]:border-b">
      <tr class="border-b transition-colors">
        <th class="h-12 px-4 text-left align-middle font-medium text-muted-foreground">Rule</th>
        <th class="h-12 px-4 text-left align-middle font-medium text-muted-foreground">Device</th>
        <th class="h-12 px-4 text-left align-middle font-medium text-muted-foreground">Status</th>
        <th class="h-12 px-4 text-left align-middle font-medium text-muted-foreground">Verified</th>
        <th class="h-12 px-4 text-left align-middle font-medium text-muted-foreground">Started At</th>
        <th class="h-12 px-4 text-left align-middle font-medium text-muted-foreground">Error</th>
      </tr>
    </thead>
    <tbody class="[&_tr:last-child]:border-0">
      {% for action in actions %}
      <tr class="border-b transition-colors hover:bg-muted/50">
        <td class="p-4 align-middle font-medium">{{ action.rule.name }}</td>
        <td class="p-4 align-middle">{{ action.device.hostname }}</td>
        <td class="p-4 align-middle">
          {% if action.status == "success" %}
            <span class="inline-flex items-center rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-semibold text-green-800">
              Success
            </span>
          {% elif action.status == "failed" %}
            <span class="inline-flex items-center rounded-full bg-red-100 px-2.5 py-0.5 text-xs font-semibold text-red-800">
              Failed
            </span>
          {% elif action.status == "rolled_back" %}
            <span class="inline-flex items-center rounded-full bg-yellow-100 px-2.5 py-0.5 text-xs font-semibold text-yellow-800">
              Rolled Back
            </span>
          {% elif action.status == "running" %}
            <span class="inline-flex items-center rounded-full bg-blue-100 px-2.5 py-0.5 text-xs font-semibold text-blue-800">
              Running
            </span>
          {% else %}
            <span class="inline-flex items-center rounded-full bg-gray-100 px-2.5 py-0.5 text-xs font-semibold text-gray-800">
              {{ action.status|title }}
            </span>
          {% endif %}
        </td>
        <td class="p-4 align-middle text-sm">
          {% if action.verification_passed is None %}
            <span class="text-muted-foreground">-</span>
          {% elif action.verification_passed %}
            <span class="text-green-600">✓ Passed</span>
          {% else %}
            <span class="text-red-600">✗ Failed</span>
          {% endif %}
        </td>
        <td class="p-4 align-middle text-sm text-muted-foreground">{{ action.started_at|date:"Y-m-d H:i:s" }}</td>
        <td class="p-4 align-middle text-sm">
          {% if action.error_message %}
            <span class="text-red-600 truncate max-w-xs inline-block" title="{{ action.error_message }}">
              {{ action.error_message|truncatewords:10 }}
            </span>
          {% else %}
            <span class="text-muted-foreground">-</span>
          {% endif %}
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="6" class="p-4 text-center py-12">
          <div class="flex flex-col items-center gap-2 text-muted-foreground">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
            </svg>
            <p class="font-medium">No remediation actions found</p>
            <p class="text-sm">Remediation actions will appear here when auto-remediation is triggered.</p>
          </div>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
