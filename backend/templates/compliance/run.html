{% extends "base.html" %}
{% block title %}Run Compliance - webnet{% endblock %}

{% block content %}
<!-- Page Header -->
<div class="flex flex-col gap-4 md:flex-row md:items-center md:justify-between mb-6">
  <div>
    <h1 class="text-2xl font-bold tracking-tight">Run Compliance Check</h1>
    <p class="text-muted-foreground">Execute a compliance policy against target devices</p>
  </div>
</div>

<div class="max-w-xl">
  <!-- Form Card -->
  <div class="rounded-lg border bg-card p-6">
    <form hx-post="" hx-target="#compliance-run-result" class="space-y-4">
      {% csrf_token %}
      
      <div class="space-y-2">
        <label for="policy_id" class="text-sm font-medium leading-none">Select Policy</label>
        <div data-island="FormSelect" data-props='{"name":"policy_id","placeholder":"Choose a policy","options":[{% for policy in policies %}{"value":"{{ policy.id }}","label":"{{ policy.name|escapejs }} ({{ policy.customer.name|escapejs }})"}{% if not forloop.last %},{% endif %}{% endfor %}]}'>
        </div>
        <input type="hidden" name="policy_id" id="policy_id" />
      </div>

      <div class="border-t pt-4">
        <button type="submit" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring h-9 px-4 py-2 w-full bg-primary text-primary-foreground shadow hover:bg-primary/90">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          Run Compliance Check
        </button>
      </div>
    </form>

    <div id="compliance-run-result" class="mt-4"></div>
  </div>
</div>
{% endblock %}
