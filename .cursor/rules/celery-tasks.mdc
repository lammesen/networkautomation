---
description: Celery task patterns
globs: ["**/tasks.py", "**/jobs/**/*.py"]
alwaysApply: false
---

# Celery Task Pattern

```python
from webnet.core.celery import celery_app

@celery_app.task(bind=True)
def my_task(self, job_id: int, customer_id: int, user_id: int) -> dict:
    """Always scope by customer_id and use JobService for lifecycle."""
    from webnet.jobs.services import JobService
    
    job = JobService.get_job(job_id, customer_id)
    # Implementation with proper tenant scoping
    return {"status": "completed"}
```

**Rules:**
- Always scope by `customer_id` parameter
- Use `JobService` for job lifecycle management
- Broadcast updates via Channels for WebSocket clients
