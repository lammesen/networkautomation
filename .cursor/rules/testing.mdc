---
description: Test patterns
globs: ["**/test_*.py", "**/tests/**"]
alwaysApply: false
---

# Test Pattern

```python
import pytest
from rest_framework import status
from rest_framework.test import APIClient

@pytest.mark.django_db
class TestMyAPI:
    def test_list_scoped_to_customer(self, api_client, customer, my_model):
        """Models are filtered by customer."""
        response = api_client.get("/api/v1/my-models/")
        assert response.status_code == status.HTTP_200_OK
        assert len(response.data["results"]) == 1
    
    def test_cannot_access_other_customer(self, api_client, other_customer_model):
        """Cannot access models from other customers."""
        response = api_client.get(f"/api/v1/my-models/{other_customer_model.id}/")
        assert response.status_code == status.HTTP_404_NOT_FOUND
```

**Rules:**
- Always verify tenant isolation in tests
- Test that cross-customer access returns 404
- Use `@pytest.mark.django_db` for database tests
